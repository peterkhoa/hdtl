using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using hoachdinhtuonglai.Data.Core;

namespace hoachdinhtuonglai.control.Post
{
    public partial class detailrss : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string url = Request["url"];
            string content = AutoFeedDA.GetHTML(url);
            if (string.IsNullOrEmpty(content))
                return;
            int begin = 0;
            int end = 0;
            
            begin = content.IndexOf("<div class=\"content\"");
            if (begin > 0)
            {
                content = content.Substring(begin + 21, content.Length - begin - 22);
            }

            end = content.LastIndexOf("class=\"tag-parent\"");
            content = content.Substring(0, end - 5);

            content = content.Replace("http://vnexpress.net", "/?page=feed&url=http://vnexpress.net");
            content = content.Replace("\"/gl/", "http://vnexpress.net/gl/");
            if (content.Contains("http://vnexpress.net"))
            {

            }
            content = content.Replace("/Files", "http://vnexpress.net/Files");
            content = content.Replace("/Library", "http://vnexpress.net/Library");
            content = content.Replace("/Images", "http://vnexpress.net/Images");
            content = content.Replace("/Service", "http://vnexpress.net/Service");
            LabelContent.Text = content;
        }
    }
}